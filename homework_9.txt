#1
sudo vim /etc/systemd/system/node_exporter.service
Unit]
Description=Node Exporter
After=network.target

[Service]
User=node_exporter
Group=node_exporter
Type=simple
ExecStart=/usr/local/bin/node_exporter

[Install]
WantedBy=multi-user.target

sudo systemctl daemon-reload
sudo systemctl start node_exporter
sudo systemctl status node_exporter
sudo systemctl enable node_exporter

#2
sudo vim /etc/prometheus/prometheus.yml


#4
sudo dmesg | grep "Hypervisor detected"
Если система физическая, мы не увидим никаких выходных данных.

hostnamectl status
systemd-detect-virt

#5
Это означает максимальное количество дескрипторов файлов, которое может выделить процесс. Значение по умолчанию - 1024 * 1024 (1048576).

ulimit -n

#6
unshare -f --pid --mount-proc sleep 1h
узнаем pid (ps aux)
nsenter --target 3451 --mount --uts --ipc --net --pid ps aux
USER         PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
root           1  0.0  0.0   5364   684 pts/2    S+   11:25   0:00 sleep 1h
root           2  0.0  0.0   9940  3240 pts/4    R+   11:27   0:00 ps aux

